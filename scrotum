#! /usr/bin/sh

#author:rski
#email:rom.skiad@gmail.com
#filename:scrotum
#take a screenshot with escrotum and put it in a $MONTH_YEAR folder

screenshoters_array=("scrot" "escrotum")
SCREENCAPSROOT=~/Pictures/screencaps
SUBDIR="$(date +%b)_$(date +%Y)"

#figure out which screenshot program is installed
for i in "${screenshoters_array[@]}"
do
  if [ $(which $i) ]; then
    SCREENSHOT_COMMAND=$i
    echo "Using $SCREENSHOT_COMMAND"
    break
  fi
done

#create the screenshot directory
if [ ! -d "$SCREENCAPSROOT/$SUBDIR" ]; then
  mkdir -p "$SCREENCAPSROOT/$SUBDIR"
fi

DIR=$SCREENCAPSROOT/$SUBDIR/

#scrot and escrotum for some don't parse $VARIABLES properly
#so -e 'mv $f $DIR wont work'
#this is a workaround
FILE=$($SCREENSHOT_COMMAND $1)

echo "Moving screenshot to $DIR"
mv $FILE $DIR
